<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>SmartCompress</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
        media="screen">

</head>

<body>
    <!--top header section start -->
    <div class="top_header_section">
        <div class="container">
            <div class="top_section">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="call_taital">
                            <ul>
                                <li><a href="#"><img src="images/call-icon.png"></a></li>
                                <li><a href="#">+ 1234567890</a></li>
                                <li class="mail"><a href="#"><img src="images/mail-icon.png"></a></li>
                                <li><a href="#">indrinurfiani99@gmail.com</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="top_taital">Smaller Size, Uncompromised Quality</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- top header section start -->
    <!-- header section start -->
    <div class="header_section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12 col-lg-3">
                    <div class="logo"><a href="index.html"><img src="images/logo-smart.png"></a></div>
                </div>
                <div class="col-sm-5">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                            <div class="navbar-nav">
                                <ul>
                                    <li><a class="nav-item nav-link" href="index.html">Home</a></li>
                                    <li>|</li>
                                    <li><a class="nav-item nav-link" href="image.html">Image</a></li>
                                    <li>|</li>
                                    <li><a class="nav-item nav-link" href="audio.html">Audio</a></li>
                                    <li>|</li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- header section end -->
    <!-- banner section stert -->
    <div class="banner_section">
        <div class="container-fluid">
            <section class="slide-wrapper">
                <div class="container-fluid">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <!-- Indicators -->
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                            <li data-target="#myCarousel" data-slide-to="3"></li>
                        </ol>

                        <!-- Wrapper for slides -->
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <div class="row">
                                    <div class="col-md-7">
                                        <div class="images_1"><img src="images/banner-bg.png"></div>
                                        <div class="banner_main">
                                            <div class="banner_left">
                                                <div class="red_bt"><a href="#">Read More</a></div>
                                            </div>
                                            <div class="banner_right">
                                                <h1 class="usiing_text">SmartCompress</h1>
                                                <p class="point_text">Unlocking the Potential of Media Optimization</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="images_2"><img src="images/img-1.png"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </div>
    <div class="contact_section layout_padding">
        <div class="container">
            <h1 class="about_text">Image Compression</h1>
            <div class="mail_section">
                <div class="row">
                    <div class="contents-item left">
                        <p class="point_text">Masukan File</p>
                        <input class="input_text" type="file" id="imageInput" accept="image/*">
                        <br>
                        <button class="send_text" onclick="compressImage()">Kompres Gambar</button>
                        <br>
                        <button class="send_text"><a href="#" download id="downloadImageLink"
                                style="display: none;">Download Gambar Kompresi</a></button>
                        <p class="point_text" id="originalImageSize"></p>
                        <p class="point_text" id="compressedImageSize"></p>
                    </div>
                    <div class="contents-item right">
                        <p class="point_text">Preview Gambar</p>
                        <img src="" id="previewImage" style="max-width: 300px; max-height: 300px;">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Image compression section end -->

    <!-- Audio compression section start -->
    <div class="cameras_section layout_padding">
        <div class="container">
            <h1 class="Cameras_text">Audio Compression</h1>
            <div class="cameras_section_2">
                <div id="main_slider" class="carousel slide" data-ride="carousel"></div>
                <div class="contact_section layout_padding">
                    <div class="container">
                        <div class="mail_section">
                            <div class="row">
                                <div class="contents-item left">
                                    <p class="point_text">Masukan File</p>
                                    <input class="input_text" type="file" id="fileInput" accept="audio/*">
                                    <br>
                                    <button class="send_text" onclick="compressAudio()">Kompres Audio</button>
                                    <br>
                                    <p class="point_text" id="originalAudioSize"></p>
                                    <p class="point_text" id="compressedAudioSize"></p>
                                    <button class="send_text"><a href="#" download id="downloadLink"
                                            style="display: none;">Download Audio Kompresi</a></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <a class="carousel-control-prev" href="#main_slider" role="button" data-slide="prev">
        <i class="fa fa-angle-left"></i></a>
    </a>
    <a class="carousel-control-next" href="#main_slider" role="button" data-slide="next">
        <i class="fa fa-angle-right"></i>
    </a>
    </div>
    </div>
    </div>
    </div>
    <!-- Audio compression section end -->

    <!-- footer section start -->
    <div class="footer_section">
        <div class="container">
            <p class="long_text">Unleash the power of pristine audio and revolutionize your visual experience with
                cutting-edge compression technology.</p>
        </div>
    </div>
    <!-- footer section end -->
    <!-- copyright section start -->
    <div class="copyright_section">
        <div class="container">
            <p class="copyright_text">Copyright 2023 All Right Reserved By. Indri Nurfiani</p>
        </div>
    </div>
    <!-- copyright section end -->


    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <!-- javascript -->
    <script src="js/owl.carousel.js"></script>
    <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".fancybox").fancybox({
                openEffect: "none",
                closeEffect: "none"
            });

            $(".zoom").hover(function () {

                $(this).addClass('transition');
            }, function () {

                $(this).removeClass('transition');
            });
        });


        $('#myCarousel').carousel({
            interval: false
        });

        //scroll slides on swipe for touch enabled devices

        $("#myCarousel").on("touchstart", function (event) {

            var yClick = event.originalEvent.touches[0].pageY;
            $(this).one("touchmove", function (event) {

                var yMove = event.originalEvent.touches[0].pageY;
                if (Math.floor(yClick - yMove) > 1) {
                    $(".carousel").carousel('next');
                }
                else if (Math.floor(yClick - yMove) < -1) {
                    $(".carousel").carousel('prev');
                }
            });
            $(".carousel").on("touchend", function () {
                $(this).off("touchmove");
            });
        });

        function compressImage() {
            var imageInput = document.getElementById('imageInput');
            var file = imageInput.files[0];
            var reader = new FileReader();
            reader.onload = function (e) {
                var img = document.createElement('img');
                img.src = e.target.result;

                img.onload = function () {
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');

                    canvas.width = img.width;
                    canvas.height = img.height;

                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                    canvas.toBlob(function (blob) {
                        var compressedImage = new File([blob], file.name, { type: file.type });

                        var downloadImageLink = document.getElementById('downloadImageLink');
                        downloadImageLink.href = URL.createObjectURL(compressedImage);
                        downloadImageLink.download = 'kompresi_' + file.name;
                        downloadImageLink.style.display = 'block';

                        var previewImage = document.getElementById('previewImage');
                        previewImage.src = URL.createObjectURL(compressedImage);

                        // Menampilkan ukuran file sebelum dan setelah kompresi
                        var originalImageSize = document.getElementById('originalImageSize');
                        originalImageSize.textContent = 'Ukuran Asli: ' + (file.size / 1024).toFixed(2) + ' KB';

                        var compressedImageSize = document.getElementById('compressedImageSize');
                        compressedImageSize.textContent = 'Ukuran Kompresi: ' + (compressedImage.size / 1024).toFixed(2) + ' KB';
                    }, file.type, 0.6);
                };
            };

            reader.readAsDataURL(file);
        }

        function compressAudio() {
            var fileInput = document.getElementById('fileInput');
            var file = fileInput.files[0];
            var reader = new FileReader();

            reader.onload = function (e) {
                var audioContext = new (window.AudioContext || window.webkitAudioContext)();
                audioContext.decodeAudioData(e.target.result, function (buffer) {
                    var source = audioContext.createBufferSource();
                    source.buffer = buffer;

                    var scriptNode = audioContext.createScriptProcessor(4096, 1, 1);
                    var compressor = audioContext.createDynamicsCompressor();
                    compressor.threshold.value = -30;
                    compressor.knee.value = 10;
                    compressor.ratio.value = 12;
                    compressor.attack.value = 0;
                    compressor.release.value = 0.25;

                    source.connect(scriptNode);
                    scriptNode.connect(compressor);
                    compressor.connect(audioContext.destination);

                    var compressedBuffer = audioContext.createBuffer(1, buffer.length, audioContext.sampleRate);

                    scriptNode.onaudioprocess = function (event) {
                        var inputBuffer = event.inputBuffer;
                        var outputBuffer = event.outputBuffer;

                        for (var channel = 0; channel < outputBuffer.numberOfChannels; channel++) {
                            var inputData = inputBuffer.getChannelData(channel);
                            var outputData = outputBuffer.getChannelData(channel);

                            for (var sample = 0; sample < inputBuffer.length; sample++) {
                                outputData[sample] = inputData[sample];
                            }
                        }
                    };

                    source.start();

                    setTimeout(function () {
                        source.stop();
                        audioContext.close();

                        var offlineContext = new OfflineAudioContext(1, compressedBuffer.length, audioContext.sampleRate);
                        var offlineSource = offlineContext.createBufferSource();
                        offlineSource.buffer = compressedBuffer;
                        offlineSource.connect(offlineContext.destination);
                        offlineSource.start();

                        offlineContext.startRendering().then(function (renderedBuffer) {
                            var compressedAudio = new File([renderedBuffer], file.name, { type: file.type });

                            var downloadLink = document.getElementById('downloadLink');
                            downloadLink.href = URL.createObjectURL(compressedAudio);
                            downloadLink.download = 'kompresi_' + file.name;
                            downloadLink.style.display = 'block';

                            var originalAudioSize = document.getElementById('originalAudioSize');
                            originalAudioSize.textContent = 'Ukuran Asli: ' + (file.size / 1024).toFixed(2) + ' KB';

                            var compressedAudioSize = document.getElementById('compressedAudioSize');
                            compressedAudioSize.textContent = 'Ukuran Kompresi: ' + (compressedAudio.size / 1024).toFixed(2) + ' KB';
                        });
                    }, buffer.duration * 1000);
                });
            };

            reader.readAsArrayBuffer(file);
        }

    </script>



</body>

</html>